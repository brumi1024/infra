name: "dashboard"
services:

####################
# Dashboard
####################

  homepage:
    image: ghcr.io/gethomepage/homepage:${HOMEPAGE_TAG:-latest}
    container_name: homepage
    logging:
      driver: ${LOGGING_DRIVER:-local}
    networks:
      - socky_proxy-net
    ports:
      - ${PORT_DASH_HTTP}:3000
    environment:
      - PUID=${PUID}
      - PGI=${PGID}
      - TZ=${TZ}
      - HOMEPAGE_VAR_ADMIN_DOMAIN=${ADMIN_DOMAIN}
      - HOMEPAGE_VAR_DOMAIN=${DOMAIN}
      - HOMEPAGE_VAR_TAILNET=${TAILNET}
      - HOMEPAGE_VAR_PORT_PROXMOX_HTTPS=${PORT_PROXMOX_HTTPS}
      - HOMEPAGE_VAR_SUSANOO_MONITORING_USER=${SUSANOO_MONITORING_USER}
      - HOMEPAGE_VAR_SUSANOO_MONITORING_TOKEN=${SUSANOO_MONITORING_TOKEN}
      - HOMEPAGE_VAR_TRUENAS_SCALE_TOKEN=${TRUENAS_SCALE_HOMEPAGE_TOKEN}
      - HOMEPAGE_VAR_EURUS_MONITORING_USER=${EURUS_MONITORING_USER}
      - HOMEPAGE_VAR_EURUS_MONITORING_TOKEN=${EURUS_MONITORING_TOKEN}
      - HOMEPAGE_VAR_PORT_ZEPHYRUS_HTTP=${PORT_ZEPHYRUS_HTTP}
      - HOMEPAGE_VAR_HOMEASSISTANT_KEY=${HOMEASSISTANT_KEY}
      - HOMEPAGE_VAR_HOMEASSISTANT_SEQ_KEY=${HOMEASSISTANT_SEQ_KEY}
      - HOMEPAGE_VAR_HOMEASSISTANT_KALASZ_KEY=${HOMEASSISTANT_KALASZ_KEY}
      - HOMEPAGE_VAR_PORT_PLEX_HTTP=${PORT_PLEX_HTTP}
      - HOMEPAGE_VAR_PLEX_AUTH_TOKEN=${PLEX_AUTH_TOKEN}
    volumes:
      - type: volume
        source: appdata
        target: /app/config
        volume:
          subpath: homepage
    restart: unless-stopped

networks:
  socky_proxy-net:
    name: socky_proxy-net
    external: true
volumes:
  appdata:
    driver: local
    driver_opts:
      type: nfs
      o: addr=${NAS_IP},rw,vers=4.1
      device: ":/mnt/blackbox/appdata"
